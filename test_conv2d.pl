use Modern::Perl;
use lib '.';
use ML::Util qw(conv2d print_2d_array);

my $in = 
[[qw(0.38332	0.38332	0.38332	0.38332	0.39437	0.62009	0.81675	0.76098	0.50003	0.38332	0.38332	0.38332)],
[qw(0.38332	0.38332	0.38332	0.38699	0.52007	0.90516	0.98229	0.89478	0.50747	0.38332	0.38332	0.38332)],
[qw(0.38332	0.38332	0.38567	0.49152	0.82241	0.98865	0.98241	0.77801	0.44014	0.38332	0.38332	0.38332)],
[qw(0.38332	0.38495	0.46693	0.80356	0.98141	0.98726	0.85865	0.61667	0.54564	0.49529	0.41518	0.38332)],
[qw(0.38332	0.39992	0.72648	0.97711	0.99019	0.88393	0.71643	0.84681	0.9241	0.86022	0.63129	0.41911)],
[qw(0.38332	0.4887	0.92966	0.99441	0.95572	0.81279	0.91086	0.98419	0.98563	0.97168	0.85834	0.53431)],
[qw(0.38332	0.61221	0.97362	0.98924	0.93761	0.94146	0.97799	0.92078	0.89685	0.97952	0.94585	0.63136)],
[qw(0.38332	0.70666	0.98321	0.98774	0.97772	0.97424	0.85991	0.59118	0.77064	0.97943	0.94295	0.59563)],
[qw(0.38332	0.70268	0.97379	0.99293	0.99515	0.9783	0.90512	0.88401	0.96755	0.97902	0.81254	0.46973)],
[qw(0.38332	0.58886	0.8878	0.98109	0.99393	0.99057	0.98395	0.98407	0.97703	0.84354	0.52781	0.3882)],
[qw(0.38332	0.39637	0.55057	0.80704	0.93849	0.96051	0.93774	0.87908	0.72214	0.50911	0.39402	0.38332)],
[qw(0.38332	0.38332	0.38332	0.43148	0.52726	0.55067	0.48766	0.41266	0.38504	0.38332	0.38332	0.38332)]];

my $filter =
[[qw(0.23586	-0.01473	-0.08922	-0.04354	-0.01344)],
[qw(0.18126	0.02852	-0.00247	-0.06077	-0.15979)],
[qw(0.18784	0.13943	0.17426	-0.07798	0.09305)],
[qw(0.34584	0.34533	0.05839	0.0424	0.01387)],
[qw(0.43999	0.48625	0.25776	0.24135	-0.07404)]];

print_2d_array("reduced", conv2d($in, $filter, "reduce"));
print_2d_array("expanded", conv2d($in, $filter, "expand"));
print_2d_array("padded", conv2d($in, $filter, "padded"));
